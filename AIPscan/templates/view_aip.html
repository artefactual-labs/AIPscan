{% extends "base.html" %}

{% block content %}

<div class="alert alert-info"><h2 class="h2">AIP: {{ aip.transfer_name }}</h2></div>

<table class="table table-bordered table-condensed">
  <tr><td width=20%><strong>AIP UUID</strong></td><td>{{ aip.uuid }}</td></tr>
  <tr><td width=20%><strong>Creation date</strong></td><td>{{ aip.create_date }}</td></tr>
  <tr><td width=20%><strong>Originals</strong></td><td>{{ aip.originals }}</td></tr>
  <tr><td width=20%><strong>Preservation copies</strong></td><td>{{ aip.preservation_copies }}</td></tr>
  <tr><td width=20%><strong>Fetch job</strong></td><td><a href="/view_aips/{{ fetchJob.id }}">{{ fetchJob.download_start }}</a></td></tr>
  <tr><td width=20%><strong>Storage service</strong></td><td><a href="/storage_service/{{ storageService.id }}">{{ storageService.name }}</a></td></tr>
</table>

<div class="alert alert-info"><h4>Originals ({{ aip.originals }})</h4></div>

<table class="table table-striped table-bordered table-condensed sortable">
  <tr>
  <td><strong>Name</strong></td>
  <td><strong>UUID</strong></td>
  <td><strong>Size</strong></td>
  <td><strong>PUID</strong></td>
  <td><strong>Format</strong></td>
  <td><strong>Creation date</strong></td>
  <td><strong>Ingestion date</strong></td>
  <td><strong>Preservation copy</strong></td>
  </tr>
  {% if originals %}
    {% for original in originals %}
      <tr>
        <td>{{ original.name }}</td>
        <td>{{ original.uuid }}</td>
        <td>{{ original.size }} bytes</td>
        <td>{{ original.puid }}</td>
        <td>{{ original.format }} {% if original.format_version != None %} {{original.format_version}}{% endif %}</td>
        <td>{{ original.creation_date }}</td>
        <td>{{ original.ingestion_date }}</td>
        <td>{{ original.related_uuid }}</td>
      </tr>
    {% endfor %}
  {% endif %}
</table>

{% if preservationCopies %}
<div class="alert alert-info"><h4>Preservation copies ({{ aip.preservation_copies }})</h4></div>

<table class="table table-striped table-bordered table-condensed sortable">
  <tr>
  <td><strong>Name</strong></td>
  <td><strong>UUID</strong></td>
  <td><strong>Size</strong></td>
  <td><strong>Format</strong></td>
  <td><strong>Normalization date</strong></td>
  <td><strong>Original</strong></td>
  </tr>

    {% for preservationCopy in preservationCopies %}
      <tr>
        <td>{{ preservationCopy.name }}</td>
        <td>{{ preservationCopy.uuid }}</td>
        <td>{{ preservationCopy.size }} bytes</td>
        <td>{{ preservationCopy.format }}</td>
        <td>{{ preservationCopy.normalization_date }}</td>
        <td>{{ preservationCopy.related_uuid }}</td>
      </tr>
    {% endfor %}
</table>
{% endif %}

{% endblock %}
