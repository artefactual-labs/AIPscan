{% extends "base.html" %}

{% block content %}

<h3 class="h3">METS Fetch Job</h3>

<table class="table table-bordered table-condensed">
  <tr><td width=20%><strong>Storage Service</strong></td><td><a href="/storage_service/{{ storageService.id }}">{{ storageService.name }}</a></td></tr>
  <tr><td width=20%><strong>Download date</strong></td><td>{{ metsFetchJob.download_start }}</td></tr>
  <tr><td width=20%><strong>Download duration</strong></td><td>{{ metsFetchJob.download_end - metsFetchJob.download_start }}</td></tr>
  <tr><td width=20%><strong>Packages in SS</strong></td><td>{{ metsFetchJob.total_packages }}</td></tr>
  <tr><td width=20%><strong>AIP METS downloaded</strong></td><td>{{ metsFetchJob.total_aips }}</td></tr>
  <tr><td width=20%><strong>Deleted AIPs skipped</strong></td><td>{{ metsFetchJob.total_deleted_aips }}</td></tr>
  <tr><td width=20%><strong>METS parsing duration</strong></td><td>{{ metsFetchJob.parse_end - metsFetchJob.parse_start }}</td></tr>
</table>

<div class="alert alert-info"><h4>AIPs ({{ metsFetchJob.total_aips }})</h4></div>

<table class="table table-striped table-bordered table-condensed sortable">
  <tr>
  <td><strong>Transfer name</strong></td>
  <td><strong>AIP UUID</strong></td>
  <td><strong>Creation date</strong></td>
  <td><strong>Originals</strong></td>
  <td><strong>Preservation copies</strong></td>
  <td><strong>Action</strong></td>
  </tr>
  {% if AIPs %}
    {% for aip in AIPs %}
      <tr>
        <td>{{ aip.transfer_name }}</td>
        <td>{{ aip.uuid }}</td>
        <td>{{ aip.create_date }}</td>
        <td>{{ aip.originals }}</td>
        <td>{{ aip.preservation_copies }}</td>
        <td><a href="/view_aip/{{ aip.id }}"><button type="button" class="btn btn-info">View</button></a></td>
      </tr>
    {% endfor %}
  {% endif %}
</table>

{% endblock %}
